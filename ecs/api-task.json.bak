[
  {
    "name": "${container_name}",
    "image": "${image}",
    "portMappings": [
      {
        "containerPort": ${container_port},
        "hostPort": ${container_port}
      }
    ],
    "cpu": ${desired_task_cpu},
    "memory": ${desired_task_memory},
    "networkMode": "awsvpc",
    "essential": true,
    "logConfiguration": {
      "logDriver": "awslogs",
      "options": {
        "awslogs-group": "${log_group}",
        "awslogs-region": "ap-northeast-1",
        "awslogs-stream-prefix": "${container_name}"
      }
    },
    "environment": [${environment_variables_str}]
  },
  {
    "name": "${container_name}",
    "image": "${image}",
    "portMappings": [
      {
        "containerPort": ${container_port},
        "hostPort": ${container_port}
      }
    ],
    "cpu": ${desired_task_cpu},
    "memory": ${desired_task_memory},
    "networkMode": "awsvpc",
    "essential": true,
    "logConfiguration": {
      "logDriver": "awslogs",
      "options": {
        "awslogs-group": "${log_group}",
        "awslogs-region": "ap-northeast-1",
        "awslogs-stream-prefix": "${container_name}"
      }
    },
    "environment": [${environment_variables_str}]
  },
]

{
  "name": "${container_name}",
  "image": "${image}",
  "portMappings": [
    {
      "containerPort": ${container_port},
      "hostPort": ${container_port}
    }
  ],
  "cpu": ${desired_task_cpu},
  "memory": ${desired_task_memory},
  "networkMode": "awsvpc",
  "essential": true,
  "logConfiguration": {
    "logDriver": "awslogs",
    "options": {
      "awslogs-group": "${log_group}",
      "awslogs-region": "${region}",
      "awslogs-stream-prefix": "${container_name}"
    }
  },
},
{
  "name": "nginx",
  "image": "032796414879.dkr.ecr.us-east-1.amazonaws.com/scubdadivedubai-api-nginx",
  "memory": "256",
  "cpu": "256",
  "essential": true,
  "portMappings": [
    {
      "containerPort": ${container_port},
      "hostPort": ${container_port}
    }
  ],
  "links": [
    "app"
  ],
  "logConfiguration": {
    "logDriver": "awslogs",
    "options": {
      "awslogs-group": "${log_group}",
      "awslogs-region": "${region}",
      "awslogs-stream-prefix": "scubadivedubai-api-nginx"
    }
  },
},
{
  "name": "${container_name}",
  "image": "${image}",
  "cpu": ${desired_task_cpu},
  "memory": ${desired_task_memory},
  "essential": true,
  "logConfiguration": {
    "logDriver": "awslogs",
    "options": {
      "awslogs-group": "${log_group}",
      "awslogs-region": "${region}",
      "awslogs-stream-prefix": "${container_name}-scubadivedubai"
    }
  },
  "environment": [${environment_variables_str}]
}


032796414879.dkr.ecr.us-east-1.amazonaws.com/scubadivedubai-api